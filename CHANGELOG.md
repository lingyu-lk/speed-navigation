# 更新日志

所有重要的项目更改都将记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [2.0.0] - 2025-12-10

### ✨ 新增功能
- 完整的夜间模式支持，支持自动保存主题偏好
- 收藏功能：右键点击卡片添加/取消收藏
- 访问历史记录：自动记录访问网站和次数
- 智能搜索：支持中文、英文、拼音搜索
- 搜索防抖优化：提升搜索性能
- 键盘快捷键支持：
  - `Ctrl/Cmd + K` 聚焦搜索
  - `ESC` 清空搜索
  - `Ctrl/Cmd + D` 切换主题
- 扩展的拼音映射表：支持更多中文汉字
- PWA 支持准备：添加 manifest.json
- 数据持久化：使用 localStorage 保存用户数据

### 🎨 界面改进
- 全新的 CSS 变量系统，支持主题切换
- 改进的响应式设计
- 优化的移动端体验
- 更流畅的动画效果
- 改进的卡片悬停效果
- 骨架屏加载效果（准备就绪）

### 🔧 代码重构
- 完全模块化的代码结构
- 分离 CSS、JavaScript 和数据文件
- ES6+ 现代语法
- 面向对象的类设计：
  - `ThemeManager` - 主题管理
  - `FavoritesManager` - 收藏管理
  - `HistoryManager` - 历史记录管理
  - `SearchManager` - 搜索管理
  - `NavigationManager` - 导航管理
  - `SiteRenderer` - 站点渲染
- 工具函数封装（防抖、拼音转换、HTML 转义等）
- 错误处理和异常捕获

### 🔒 安全性增强
- 所有外部链接添加 `rel="noopener noreferrer"`
- HTML 内容转义防止 XSS 攻击
- 输入验证和数据清洗

### 📊 SEO 优化
- 完整的 meta 标签
- Open Graph 标签支持
- Twitter Card 支持
- 结构化数据（Schema.org）
- 语义化 HTML 标签
- 改进的页面标题和描述

### ♿ 可访问性改进
- 完整的 ARIA 标签
- 键盘导航支持
- 屏幕阅读器优化
- 焦点管理
- 跳转到主内容链接
- 改进的对比度
- 打印样式优化

### ⚡ 性能优化
- 请求动画帧优化滚动监听
- 搜索防抖减少计算
- DNS 预连接
- 资源预加载
- 优化的 CSS 选择器
- 减少重排和重绘

### 📝 文档完善
- 详细的 README.md
- 完整的使用指南（GUIDE.md）
- 代码注释完善
- JSDoc 风格的文档注释

### 🐛 修复
- 修复移动端菜单切换问题
- 修复搜索时的性能问题
- 修复主题切换时的闪烁
- 改进浏览器兼容性

### 📦 项目结构
```
新增文件：
- css/style.css          # 独立样式文件
- js/app.js             # 主应用脚本
- js/pinyin.js          # 拼音映射表
- data/sites.json       # 网站数据
- manifest.json         # PWA 配置
- README.md             # 项目说明
- GUIDE.md              # 使用指南
- CHANGELOG.md          # 更新日志

备份文件：
- index-old-backup.html # 原始版本备份
```

## [1.0.0] - 初始版本

### 特性
- 基础的网站导航功能
- 15 个分类
- 120+ 精选网站
- 简单的搜索功能
- 基础的响应式设计
- 侧边栏导航
- 返回顶部按钮
- 统计信息展示

### 已知问题
- 所有代码在单个 HTML 文件中
- 无夜间模式
- 无数据持久化
- 搜索性能有待优化
- 缺少可访问性支持
- SEO 优化不足

---

## 版本说明

### [2.0.0] 的主要变化
从 1.0.0 到 2.0.0 是一次重大升级，几乎重写了整个项目：

1. **架构改进**：从单文件变为模块化多文件结构
2. **功能增强**：添加了收藏、历史、主题切换等核心功能
3. **性能提升**：使用现代优化技术，提升用户体验
4. **标准合规**：符合 Web 标准和最佳实践
5. **维护性**：代码结构清晰，易于维护和扩展

### 向后兼容性
- 网站数据格式兼容（从 HTML 迁移到 JSON）
- 原始 HTML 文件备份为 `index-old-backup.html`
- localStorage 键名保持向前兼容

### 升级指南
如果从 1.0.0 升级：
1. 备份你的自定义网站数据
2. 将自定义网站添加到 `data/sites.json`
3. 替换所有文件为新版本
4. 测试功能是否正常

---

## 未来计划

### v2.1.0 (计划中)
- [ ] 自定义添加网站的 UI 界面
- [ ] 拖拽排序功能
- [ ] 导出/导入配置
- [ ] 更多拼音映射
- [ ] 改进的历史记录界面

### v2.2.0 (计划中)
- [ ] Service Worker 支持
- [ ] 离线访问
- [ ] 添加到主屏幕
- [ ] 推送通知

### v3.0.0 (远期)
- [ ] 云同步功能
- [ ] 多语言支持
- [ ] 更多主题选项
- [ ] 插件系统
- [ ] 社区分享功能

---

## 贡献指南
欢迎提交 Pull Request！请确保：
- 遵循现有代码风格
- 添加必要的注释
- 更新相关文档
- 在 CHANGELOG 中记录变更

## 问题反馈
发现 Bug 或有功能建议？请提交 [Issue](https://github.com/yourusername/nav/issues)。

---

**版本命名规则**：`主版本号.次版本号.修订号`
- **主版本号**：不兼容的 API 修改
- **次版本号**：向下兼容的功能性新增
- **修订号**：向下兼容的问题修正
